{% extends "base.html" %}

{% block title %}Home - AI-Powered Invoice OCR System{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h2 class="mb-0">Invoice Analyzer</h2>
            </div>
            <div class="card-body">
                <p class="lead text-center mb-4">
                    Upload an invoice image to extract structured data using AI-powered analysis.
                </p>
                
                <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" class="mb-4">
                    <div class="mb-3">
                        <label for="file" class="form-label">Choose an invoice image:</label>
                        <input type="file" class="form-control" id="file" name="file" accept=".png,.jpg,.jpeg,.gif,.bmp,.tiff,.tif" required>
                        <div class="form-text">
                            Supported formats: PNG, JPG, JPEG, GIF, BMP, TIFF, TIF
                        </div>
                    </div>
                    
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="enable_deskew" name="enable_deskew" checked>
                        <label class="form-check-label" for="enable_deskew">Enable deskewing (straightening)</label>
                        <div class="form-text">
                            Uncheck this if your invoice is already properly oriented but is being incorrectly rotated during processing.
                        </div>
                    </div>
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="bi bi-upload"></i> Upload and Process
                        </button>
                    </div>
                </form>
                
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">How it works</h5>
                    </div>
                    <div class="card-body">
                        <ol class="mb-0">
                            <li>Upload an image of your invoice</li>
                            <li>The system preprocesses the image for optimal OCR quality</li>
                            <li>Tesseract OCR extracts text from the enhanced image</li>
                            <li>AI-powered LLM analyzes the text to identify structured data</li>
                            <li>Results display invoice metadata, line items, and summary information</li>
                        </ol>
                    </div>
                </div>
                
                <div class="card mt-3">
                    <div class="card-header">
                        <h5 class="mb-0">Key Benefits</h5>
                    </div>
                    <div class="card-body">
                        <ul class="mb-0">
                            <li><strong>Format Agnostic:</strong> Works with various invoice layouts and formats</li>
                            <li><strong>Intelligent Extraction:</strong> Uses AI to understand invoice structure</li>
                            <li><strong>Detailed Results:</strong> Extracts invoice number, dates, customer info, line items, and totals</li>
                            <li><strong>Time Saving:</strong> Automates manual data entry from invoices</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Preview uploaded image before submission
    document.getElementById('file').addEventListener('change', function(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                // You could add image preview logic here if desired
            };
            reader.readAsDataURL(file);
        }
    });
</script>
{% endblock %} 